(this["webpackJsonpreact-typescript"]=this["webpackJsonpreact-typescript"]||[]).push([[0],{528:function(e,t,a){},571:function(e,t,a){"use strict";a.r(t);var i=a(410),s=a(592),n=a(590),o=a(57),r=(a(528),a(503)),c=a(103),l=a(0),d=(a(556),a(25)),h=a(2),u=a(1),m=Object(h.a)((function e(){Object(u.a)(this,e),this.RollLeft="a",this.RollRight="d"})),f=Object(h.a)((function e(){Object(u.a)(this,e)}));f.flyCamera=void 0,f.xwingMesh=void 0,f.deathStarMeshes=[],f.scene=void 0,f.canvas=void 0,f.pewSound=void 0,f.introAudio=void 0,f.outroAudio=void 0,f.deathStarGroupCollisionmesh=void 0;var p=Object(h.a)((function e(){Object(u.a)(this,e)}));p.isPaused=!0,p.screenCapHasClicked=!1;var v=a(589),b=a(593),j=Object(h.a)((function e(t,a){var i=this;Object(u.a)(this,e),this.laserMesh=void 0,this.frameRate=20,this.flyCamera=void 0,this.scene=void 0,this.startPosition=c.j.Up(),this.endPosition=c.j.Up(),this.forwardDirection=c.j.Up(),this.displacement=0,this.unitVec=c.j.Up(),this.frameCounter=0,this.maxFrame=60,this.laserMoveIncrement=8,this.isAHit=!1,this.createLaserBeam=function(){var e=new c.i("material",i.scene);e.specularPower=5,e.diffuseColor=c.b.FromHexString("#ff0000"),e.emissiveColor=c.b.FromHexString("#ff0000"),e.useEmissiveAsIllumination=!0,i.laserMesh.material=e,new c.d("glow",i.scene).addIncludedOnlyMesh(i.laserMesh),i.laserMesh.alignWithNormal(i.flyCamera.getForwardRay().direction),i.startPosition=i.flyCamera.position.clone(),i.laserMesh.position=i.startPosition;var t=i.flyCamera.getForwardRay(4e3).clone();i.forwardDirection=t.direction.normalizeToNew(),f.deathStarGroupCollisionmesh&&(i.isAHit=t.intersectsMesh(f.deathStarGroupCollisionmesh).hit)},this.advanceBeamPosition=function(){i.frameCounter>i.maxFrame?i.laserMesh&&(g.removeLaser(i),i.laserMesh.dispose()):(i.laserMesh.position=i.startPosition.add(i.forwardDirection.scale(i.displacement)),i.displacement+=i.laserMoveIncrement,i.frameCounter++)},this.flyCamera=t,this.scene=a,this.laserMesh=c.e.CreateCylinder("laser_times",{diameter:1,height:2},this.scene),this.createLaserBeam()})),g=Object(h.a)((function e(){Object(u.a)(this,e)}));g.laserBeams=[],g.fireLaser=function(){f.flyCamera&&f.scene&&g.laserBeams.push(new j(f.flyCamera,f.scene))},g.removeLaser=function(e){var t=g.laserBeams.indexOf(e);t>-1&&g.laserBeams.splice(t,1)},g.advanceLaserBeamPositions=function(){g.laserBeams.forEach((function(e){e.laserMesh&&e.advanceBeamPosition()}))};var w=Object(h.a)((function e(){Object(u.a)(this,e)}));w.setupDeathStars=function(e){var t=f.deathStarMeshes;e.name="deathstar0",null===t||void 0===t||t.push(e);for(var a=0;a<49;a++){var i=e.clone("deathstar"+(a+1),null,!1);t.push(i)}for(var s=0,n=0,o=0;o<50;o++){var r=t[o];if(o>0&&o%10===0&&(s+=100,n=0),null!==r){n+=100;var d=Math.abs(7*Math.random())+90;t.push(r),r.position=new l.e(n-400,s-200,1e3),r.rotation=new l.e(0,d,0),r.scaling=new l.e(3,3,3)}}if(t[0]&&t[24]){f.deathStarGroupCollisionmesh=c.e.CreateBox("ds_collider");var h=f.deathStarGroupCollisionmesh;h.material=new c.i("dt_collision",f.scene),h.scaling=new l.e(1e3,600,100),h.position=t[24].position}};var y=a(73);function O(){var e=Object(d.useState)(!1),t=Object(o.a)(e,2),a=t[0],i=t[1],s=Object(d.useState)(!1),h=Object(o.a)(s,2),u=h[0],j=h[1],O=function(){var e=f.flyCamera,t=f.xwingMesh;!function(e){var t=null===e||void 0===e?void 0:e.getEngine().getRenderingCanvas();t&&t.addEventListener("click",(function(e){t.requestPointerLock=t.requestPointerLock||t.msRequestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock&&t.requestPointerLock()}),!1)}(f.scene),e&&(e.lockedTarget=void 0,e.inputs.addMouse(),e.inputs.addKeyboard(),e.keysUp.push(87),e.keysLeft=[],e.keysRight=[],e.speed=4,e.inertia=.87),t&&e&&(t.parent=e),p.isPaused=!1};return Object(y.jsxs)(n.a,{container:!0,flexDirection:"column",children:[Object(y.jsx)(n.a,{item:!0,alignItems:"flex-start",children:Object(y.jsxs)(v.a,{color:"info",variant:"contained",href:"https://github.com/master0000blaster/get-them-deathstars",target:"_blank",children:[Object(y.jsx)("img",{style:{maxWidth:50},src:"/static/images/GitHub_Logo.png"}),"Project"]})}),Object(y.jsx)(n.a,{item:!0,children:Object(y.jsx)(b.a,{elevation:2,children:Object(y.jsx)(r.a,{antialias:!0,adaptToDeviceRatio:!0,canvasId:"xwing-canvas",children:Object(y.jsxs)(r.b,{beforeRender:function(){if(!p.isPaused){g.advanceLaserBeamPositions();var e=f.xwingMesh,t=f.flyCamera;if(e&&t){var i=.03;a&&(e.rotation.z+=i,t.rotation.z+=i),u&&(e.rotation.z-=i,t.rotation.z-=i)}}},onSceneMount:function(e){f.scene=e.scene,f.canvas=e.canvas;var t=f.scene;p.isPaused=!0,f.pewSound=new c.h("pew","/static/sounds/PEW.mp3",t,null,{loop:!1,autoplay:!1}),f.introAudio=new c.h("intro","/static/sounds/PEW.mp3",t,null,{loop:!1,autoplay:!0}),f.outroAudio=new c.h("outro","/static/sounds/outro.mp3",t,null,{loop:!1,autoplay:!1}),f.introAudio.onended=O,c.g.ImportMeshAsync("","/static/3dmodels/","xwing.glb",t).then((function(e){f.xwingMesh=e.meshes[0]})),c.g.ImportMeshAsync("","/static/3dmodels/","deathstar.glb",t).then((function(e){w.setupDeathStars(e.meshes[0])})),t.actionManager=new c.a(t),t.onPointerObservable.add((function(e){var t;p.isPaused||e.type===c.f.POINTERDOWN&&(p.screenCapHasClicked&&(null===(t=f.pewSound)||void 0===t||t.play(0),g.fireLaser()),p.screenCapHasClicked=!0)})),t.actionManager.registerAction(new c.c(c.a.OnKeyDownTrigger,(function(e){if("keydown"==e.sourceEvent.type&&!p.isPaused){var t=new m;switch(e.sourceEvent.key.toLowerCase()){case t.RollLeft:i(!0);break;case t.RollRight:j(!0)}}}))),t.actionManager.registerAction(new c.c(c.a.OnKeyUpTrigger,(function(e){if("keyup"==e.sourceEvent.type&&!p.isPaused){var t=new m;switch(e.sourceEvent.key.toLowerCase()){case t.RollLeft:i(!1);break;case t.RollRight:j(!1)}}})))},children:[Object(y.jsx)("flyCamera",{onCreated:function(e,t){f.flyCamera=e,e.lockedTarget=f.deathStarMeshes[24],e.inputs.clear()},name:"xwingcamera",position:new l.e(0,0,-30),bankedTurn:!0,rollCorrect:0,bankedTurnMultiplier:2,noRotationConstraint:!0}),Object(y.jsx)("hemisphericLight",{name:"light1",intensity:.7,direction:new l.e(.5,1,0)}),Object(y.jsx)(r.c,{size:1e4,rootUrl:"/static/images/space-skybox/",name:"skybox"})]})})})})]})}function C(){return Object(y.jsx)(s.a,{maxWidth:"lg",children:Object(y.jsx)(n.a,{container:!0,item:!0,direction:"column",alignItems:"center",justifyContent:"space-around",children:Object(y.jsx)(n.a,{item:!0,children:Object(y.jsx)(O,{})})})})}var x=document.getElementById("root");Object(i.render)(Object(y.jsx)(C,{}),x)}},[[571,1,2]]]);
//# sourceMappingURL=main.443d98b9.chunk.js.map